// components/preloader.tsx
'use client'

import { motion } from 'framer-motion'
import { useEffect, useState } from 'react'

interface PreloaderProps {
  isLoading?: boolean
  onLoadingComplete?: () => void
}

export function Preloader({ isLoading = true, onLoadingComplete }: PreloaderProps) {
  const [isVisible, setIsVisible] = useState(isLoading)

  useEffect(() => {
    if (!isLoading && onLoadingComplete) {
      const timer = setTimeout(() => {
        setIsVisible(false)
        onLoadingComplete()
      }, 500)
      return () => clearTimeout(timer)
    }
  }, [isLoading, onLoadingComplete])

  if (!isVisible) return null

  return (
    <motion.div
      initial={{ opacity: 1 }}
      exit={{ opacity: 0 }}
      transition={{ duration: 0.3, ease: [0.14, 0, 0.07, 1] }}
      className="fixed inset-0 z-[100] flex items-center justify-center bg-white"
    >
      <div className="w-[80%] max-w-3xl">
        <motion.svg
          width="100%"
          height="100%"
          viewBox="-2 -2 54 26"
          preserveAspectRatio="xMidYMid meet"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          {/* S character */}
          <motion.path
            d="M7.36482 12.5647C7.36482 12.204 7.21938 11.8666 6.92851 11.5525C6.64928 11.2383 6.30023 10.9533 5.88138 10.6973C5.46253 10.4297 4.88079 10.0981 4.13616 9.70252C3.26356 9.23713 2.55965 8.83573 2.02445 8.49832C1.48925 8.14928 1.02968 7.74788 0.64573 7.29412C0.273417 6.82873 0.0872608 6.3168 0.0872608 5.75833C0.0872608 5.17659 0.337409 4.55413 0.837704 3.89095C1.34963 3.21613 1.9721 2.65184 2.70509 2.19809C3.43808 1.7327 4.1129 1.5 4.72954 1.5C5.47416 1.5 6.34096 1.58726 7.32991 1.76178C8.3305 1.93631 9.05768 2.12246 9.51143 2.32025V5.8805H8.4643C7.9291 4.93808 7.33573 4.20509 6.68418 3.68152C6.04427 3.15796 5.36945 2.89617 4.65973 2.89617C4.06636 2.89617 3.60096 3.08233 3.26356 3.45464C2.92615 3.81532 2.75744 4.28653 2.75744 4.86827C2.75744 5.25222 2.90288 5.61289 3.19375 5.9503C3.48462 6.27608 3.84529 6.57277 4.27578 6.84037C4.7179 7.10797 5.31128 7.43374 6.0559 7.81769C6.90524 8.25981 7.59751 8.64957 8.13271 8.98698C8.66791 9.32439 9.11585 9.71997 9.47653 10.1737C9.84884 10.6275 10.035 11.1278 10.035 11.6746C10.035 12.2564 9.76158 12.8846 9.21475 13.5595C8.67955 14.2226 8.02218 14.7869 7.24265 15.2523C6.46312 15.7061 5.7534 15.9329 5.11349 15.9329C4.33396 15.9329 3.40317 15.8457 2.32114 15.6712C1.25074 15.4966 0.477026 15.3105 0 15.1127V11.5525H1.06458C1.62305 12.4949 2.26296 13.2279 2.98432 13.7514C3.70568 14.275 4.44449 14.5368 5.20075 14.5368C5.85229 14.5368 6.37586 14.3448 6.77144 13.9609C7.16703 13.5653 7.36482 13.0999 7.36482 12.5647Z"
            fill="black"
            animate={{ 
              y: [-2, 2, -2],
              transition: {
                repeat: Infinity,
                repeatType: "reverse" as const,
                duration: 0.8
              }
            }}
          />
          {/* O character - outer path */}
          <motion.path
            d="M17.6476 6.07335C18.4504 6.07335 19.1718 6.27696 19.8117 6.68418C20.4516 7.07976 20.9461 7.62078 21.2951 8.30723C21.6558 8.99369 21.8361 9.75576 21.8361 10.5935C21.8361 11.501 21.5511 12.3503 20.981 13.1415C20.4225 13.9326 19.7186 14.5667 18.8692 15.0438C18.0199 15.5092 17.1997 15.7419 16.4085 15.7419C15.6057 15.7419 14.8843 15.5441 14.2444 15.1485C13.6161 14.7413 13.1217 14.1944 12.761 13.508C12.4003 12.8099 12.22 12.042 12.22 11.2043C12.22 10.2968 12.4992 9.45326 13.0577 8.67373C13.6278 7.88256 14.3375 7.25429 15.1868 6.78889C16.0362 6.31187 16.8564 6.07335 17.6476 6.07335Z"
            fill="black"
            animate={{ 
              y: [-2, 2, -2],
              transition: {
                repeat: Infinity,
                repeatType: "reverse" as const,
                duration: 0.8,
                delay: 0.1
              }
            }}
          />
          {/* O character - inner path */}
          <motion.path
            d="M16.6354 7.74876C16.0536 7.74876 15.6115 7.96982 15.309 8.41195C15.0181 8.85407 14.8727 9.50561 14.8727 10.3666C14.8727 11.4254 15.0938 12.3038 15.5359 13.0019C15.978 13.7 16.6063 14.049 17.4207 14.049C18.6075 14.049 19.2008 13.1706 19.2008 11.4137C19.2008 10.3666 18.9798 9.49398 18.5377 8.79589C18.0955 8.09781 17.4614 7.74876 16.6354 7.74876Z"
            fill="white"
            animate={{ 
              y: [-2, 2, -2],
              transition: {
                repeat: Infinity,
                repeatType: "reverse" as const,
                duration: 0.8,
                delay: 0.1
              }
            }}
          />
          {/* Accent on O */}
          <motion.path
            d="M20.7541 0.924965L16.6354 3.82202L15.8151 3.42062L17.6825 0L20.3701 0.331591L20.7541 0.924965Z"
            fill="black"
            animate={{ 
              y: [-2, 2, -2],
              transition: {
                repeat: Infinity,
                repeatType: "reverse" as const,
                duration: 0.8,
                delay: 0.1
              }
            }}
          />
          {/* P character - outer path */}
          <motion.path
            d="M29.3869 15.7435C28.8168 15.7435 28.2991 15.5807 27.8337 15.2549V18.4137L30.3643 19.1293L29.928 20.0019H23.8372V19.2863L25.3904 18.0472V9.05936L23.8372 8.11694V7.4014L27.0833 5.91797L27.6941 8.08204L30.0676 6.21466C30.4399 6.12158 30.8646 6.07504 31.3416 6.07504C32.0048 6.07504 32.5981 6.27865 33.1217 6.68586C33.6569 7.08145 34.0758 7.62246 34.3783 8.30892C34.6808 8.99537 34.832 9.75745 34.832 10.5952C34.832 11.5027 34.547 12.352 33.9769 13.1432C33.4184 13.9343 32.7145 14.5684 31.8652 15.0455C31.0158 15.5108 30.1956 15.7435 29.4044 15.7435H29.3869Z"
            fill="black"
            animate={{ 
              y: [-2, 2, -2],
              transition: {
                repeat: Infinity,
                repeatType: "reverse" as const,
                duration: 0.8,
                delay: 0.2
              }
            }}
          />
          {/* P character - inner path */}
          <motion.path
            d="M30.3643 8.02968C29.9338 8.02968 29.5208 8.10531 29.1252 8.25656C28.7412 8.39618 28.3049 8.66378 27.8163 9.05936V11.939C27.8163 12.544 28.0373 13.0501 28.4794 13.4573C28.9332 13.8529 29.5731 14.0507 30.3992 14.0507C31.5976 14.0507 32.1967 13.1781 32.1967 11.4329C32.1967 10.4672 32.0397 9.65855 31.7255 9.007C31.4114 8.35546 30.9576 8.02968 30.3643 8.02968Z"
            fill="white"
            animate={{ 
              y: [-2, 2, -2],
              transition: {
                repeat: Infinity,
                repeatType: "reverse" as const,
                duration: 0.8,
                delay: 0.2
              }
            }}
          />
          {/* U character */}
          <motion.path
            d="M47.1267 15.5654H43.549V13.8725L41.4722 15.6003C41.2279 15.6933 40.8905 15.7399 40.46 15.7399C39.6339 15.7399 38.9766 15.5014 38.4879 15.0243C37.9992 14.5357 37.7549 13.8783 37.7549 13.0523V9.0557L36.2017 8.14819V7.43265L39.3605 5.94922H40.1982V12.0051C40.1982 12.6218 40.2913 13.0523 40.4774 13.2966C40.6636 13.5293 40.9894 13.6456 41.4548 13.6456C41.7805 13.6456 42.1063 13.5875 42.4321 13.4711C42.7579 13.3548 43.1302 13.1337 43.549 12.8079V9.0557L41.9958 8.14819V7.43265L45.1546 5.94922H45.9923V14.1168L47.563 14.6928L47.1267 15.5654Z"
            fill="black"
            animate={{ 
              y: [-2, 2, -2],
              transition: {
                repeat: Infinity,
                repeatType: "reverse" as const,
                duration: 0.8,
                delay: 0.3
              }
            }}
          />
        </motion.svg>
      </div>
    </motion.div>
  )
}

export default Preloader;